// Test: impl blocks with methods
// EXPECT: 5
// EXPECT: 25
// EXPECT: 10
struct Counter {
    value: i32,
}

impl Counter {
    fn new(start: i32) -> Counter {
        Counter { value: start }
    }

    fn get(self) -> i32 {
        self.value
    }

    fn increment(self) -> Counter {
        Counter { value: self.value + 1 }
    }

    fn add(self, n: i32) -> Counter {
        Counter { value: self.value + n }
    }
}

fn main() -> i32 {
    let c: Counter = Counter::new(5);
    let v: i32 = c.get();
    println_int(v); // 5
    if v != 5 { return 1; }

    // Chain methods (functional style since we return new Counter)
    let c2: Counter = Counter::new(0).add(25);
    println_int(c2.get()); // 25
    if c2.get() != 25 { return 2; }

    let c3: Counter = Counter::new(7).add(3);
    println_int(c3.get()); // 10
    if c3.get() != 10 { return 3; }

    0
}
