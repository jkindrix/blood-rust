// Test: deep recursion (Ackermann-like function, bounded)
// EXPECT: 7
// EXPECT: 61
fn ackermann_bounded(m: i32, n: i32) -> i32 {
    if m == 0 {
        n + 1
    } else if n == 0 {
        ackermann_bounded(m - 1, 1)
    } else {
        ackermann_bounded(m - 1, ackermann_bounded(m, n - 1))
    }
}

fn power(base: i32, exp: i32) -> i32 {
    if exp == 0 { return 1; }
    base * power(base, exp - 1)
}

fn main() -> i32 {
    // A(2,2) = 7
    let a: i32 = ackermann_bounded(2, 2);
    println_int(a);
    if a != 7 { return 1; }

    // A(3,3) = 61
    let b: i32 = ackermann_bounded(3, 3);
    println_int(b);
    if b != 61 { return 2; }

    // Power function
    let p: i32 = power(2, 10);
    if p != 1024 { return 3; }

    let p2: i32 = power(3, 5);
    if p2 != 243 { return 4; }

    0
}
