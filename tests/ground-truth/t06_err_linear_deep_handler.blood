// COMPILE_FAIL: E0304
// Test: linear value captured in a deep handler should fail
effect Counter {
    op inc() -> ();
}

fn main() -> i32 {
    let x: @linear i32 = 42;
    with Counter {
        op inc() -> () { resume(()) }
    } do {
        perform Counter.inc();
        x
    }
}
